# laragrad/uuid

Package provides any functions to generate and analyze UUID with special structure.

There used special algorithm to generate UUID with next structure:

	SSSSSSSS-UUUU-UAAA-EEEE-RRRRRRRRRRRR

 - `S` - 8 hex digits is seconds value of UUID generating timestamp
 - `U` - 5 hex digits is microseconds value of UUID generating timestamp
 - `A` - 3 hex digits is custom application code
 - `E` - 4 hex digits is custom entity code
 - `R` - 12 hex digits is random value

The application code and the object code are integer values that are packed into the generated UUID. 
These codes allow you to identify (programmatically or even visually) the entity and application for which the UUID was generated.
Also, a UUID generation timestamp is packed into the UUID with an accuracy of microseconds.

## Installing

To install a package run command:

	composer require laragrad/uuid
	
## Using trait HasUuidPrimaryKey

Use trait `/Laragrad/Uuid/Models/Concerns/HasUuidPrimaryKey` in your model to autofill key field with uuid, generated by *gen_uuid()*.

Declare public properties `$appCode` and `$entityCode` in your model to tune uuid generating.

Example:

```
use /Laragrad/Uuid/Models/Concerns/HasUuidPrimaryKey;

class MyModel extends Model
{

	use HasUuidPrimaryKey
	
	public $appCode = 0x002;
	
	public $entityCode = 0x000F;

}

```

## Helper functions

### gen_uuid()

Syntax: 

	gen_uuid( [[int $entityCode] , int $appCode] ) : string

Generates uuid

Example: 

	echo gen_uuid(0xF,0x2);
	// 622235ea-8e54-f002-000f-742c8deebf77
	
### get_uuid_timestamp()

Syntax: 

	get_uuid_timestamp( string $uuid [, string $format] ) : string

Extracts timestamp from uuid generated by **gen_uuid()**.

Example: 

	$uuid = gen_uuid(0xF,0x2);
	echo get_uuid_timestamp($uuid', 'Y-m-d H:i:s.u');
	// 2022-03-04 19:00:39.906514

### get_uuid_app_code()

Syntax: 

	get_uuid_app_code( string $uuid ) : string

Extracts application code from uuid generated by **gen_uuid()**.

Example: 

	$uuid = gen_uuid(0xF,0x2);
	echo get_uuid_app_code($uuid');
	// 2

### get_uuid_entity_code()

Syntax: 

	get_uuid_entity_code( string $uuid ) : string

Extracts entity code from uuid generated by **gen_uuid()**.

Example: 

	$uuid = gen_uuid(0xF,0x2);
	echo get_uuid_entity_code($uuid');
	// 15
